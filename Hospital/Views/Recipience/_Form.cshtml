@model OA.DTO.Recipiences.RecipienceDTO

<div class="mb-3 row">
    <label class="form-label col-md-2 col-form-label" for="username">
        Prescription name<sup class="text-danger">*</sup>
    </label>
    <div class="col-md-10">
        @Html.TextBoxFor(m => m.Name, new { @class = "form-control", @id = "name", placeholder = "Prescription name", @required = "" })
        @Html.ValidationMessageFor(m => m.Name, "Required.", new { @class = "invalid-feedback" })
    </div>
</div>
<div class="mb-3 row">
    <label class="form-label col-md-2 col-form-label" for="ngaynhap">
        Select patient
        <sup class="text-danger">*</sup>
    </label>
    <div class="col-md-10 " id="datepicker2">
        @Html.DropDownList("PatientId", new SelectList(ViewBag.Patients, "Id", "Name"), null, new { @class = "form-control select2" })
    </div>
</div>

<div class="mb-3 row">
    <label class="form-label col-md-2 col-form-label" for="address">Description</label>
    <div class="col-md-10">
        @Html.TextBoxFor(m => m.Description, new { @class = "form-control", @id = "name", placeholder = "Description", @required = "" })
        @Html.ValidationMessageFor(m => m.Description, "Required.", new { @class = "invalid-feedback" })
    </div>
</div>

<div class="mb-3 row">
    <label class="form-label col-md-2 col-form-label"></label>
    <div class="col-md-10">
        <div data-repeater-list="Medicine" class="data_item_repeat">
            @if (Model.Medicine != null && Model.Medicine.Any())
            {
                for (int i = 0; i < Model.Medicine.Count; i++)
                {
                    <div data-repeater-item="" class="row">
                        <div class="mb-3 col-lg-2">
                            <label class="form-label" for="Id">
                                Choose medicine
                            </label>
                            @Html.DropDownList($"Medicine[{i}][Id]", new SelectList(ViewBag.Medicines, "Id", "Name", Model.Medicine[i].Id), null, new { @class = "form-control"  })
                        </div>
                        <div class="mb-3 col-lg-2">
                            <label class="form-label" for="Quantity">Quantity</label>
                            <input type="number" name="Quantity" Value="@Model.Medicine[i].Quantity" class="form-control">
                        </div>

                        <div class="col-lg-2 align-self-center">
                            <div class="d-grid">
                                <input data-repeater-delete="" type="button" class="btn btn-primary" value="Delete">
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <div data-repeater-item="" class="row" style="">
                    <div class="mb-3 col-lg-2">
                        <label class="form-label" for="Id">
                            Choose medicine
                        </label>
                        @Html.DropDownList("Id", new SelectList(ViewBag.Medicines, "Id", "Name"), null, new { @class = "form-control" })
                        @*<input type="text" name="Name" class="form-control">*@
                    </div>

                    <div class="mb-3 col-lg-2">
                        <label class="form-label" for="Quantity">Quantity</label>
                        <input type="number" name="Quantity" class="form-control">
                    </div>

                    <div class="col-lg-2 align-self-center">
                        <div class="d-grid">
                            <input data-repeater-delete="" type="button" class="btn btn-primary" value="Delete">
                        </div>
                    </div>
                </div>
            }
        </div>
        <input data-repeater-create="" type="button" class="btn btn-success mt-3 mt-lg-0" value="Add medicine ">
    </div>
</div>
<div class="mt-3 text-end">
    <button class="btn btn-primary w-sm waves-effect waves-light" type="submit">Save</button>
</div>

<script>
    $(document).ready(function () {
        "use strict";
        $(".repeater").repeater({
            defaultValues: {
                "textarea-input": "foo",
                "text-input": "bar",
                "select-input": "B",
                "checkbox-input": ["A", "B"],
                "radio-input": "B"
            },
            show: function () {
                $(this).slideDown()
               
            },
            hide: function (e) {
                confirm("Are you sure you want to delete this element?") && $(this).slideUp(e)
            },
            ready: function (e) {
            }
        })
        window.outerRepeater = $(".outer-repeater").repeater({
            defaultValues: {
                "text-input": "outer-default"
            },
            show: function () {
                console.log("outer show"),
                    $(this).slideDown()
            },
            hide: function (e) {
                console.log("outer delete"),
                    $(this).slideUp(e)
            },
            repeaters: [{
                selector: ".inner-repeater",
                defaultValues: {
                    "inner-text-input": "inner-default"
                },
                show: function () {
                    console.log("inner show"),
                        $(this).slideDown()
                },
                hide: function (e) {
                    console.log("inner delete"),
                        $(this).slideUp(e)
                }
            }]
        })
    });

</script>